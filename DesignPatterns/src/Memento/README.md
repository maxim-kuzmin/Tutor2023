# Паттерн "Хранитель" (Memento)

Паттерн применяется в случае, у некоторого объекта есть скрытое состояние, которое требуется сохранять отдельно от самого объекта
в каком-то внешнем хранилище с возможностью восстановления скрытого состояния объекта путём загрузки данных из этого хранилища.

Для переноса скрытого состояния объекта, который называется "Инициатор" (Originator), применяется специальный объект под
условным названием "Хранитель" (Memento). В нём скрытое состояние Инициатора хранится в открытом виде для того, чтобы Инициатор
впоследствии мог его прочитать и загрузить.

Для создания Хранителя в Инициаторе служит метод CreateMemento, возвращающий экземпляр Хранителя с данными, соответствующими
текущему внутреннему состоянию Инициатора.

Для загрузки внутреннего состояния из Хранителя используется метод SetMemento Инициатора, принимающий экземпляр Хранителя.
Внутри метода SetMemento Инициатор считывает открытые свойства Хранителя для приведения своего внутреннего состостояния в
соответствие с теми данными, которые он получает от Хранителя.

Для переноса Хранителя из Инициатора в хранилище и обратно служит клас с условным названием "Смотритель" (Caretaker).

## Задача

Сохранить недоступное извне внутреннее состояние объекта, изменить его, а потом восстановить ранее сохранённое.

## Решение

Класс Originator хранит своё состояние в приватном строковом поле. Для изменения его значения служит метод ChangeState, который
присваивает этому полю случайную строку в формате GUID.

Класс Memento содержит публичное строковое свойство State, доступное только для чтения. Его значение передаётся в конструкторе.

В классе Originator есть ещё два метода:

- CreateMemento, в котором создаётся экземпляр класса Memento с передачей в его конструктор значения приватного поля, хранящего состояние;

- SetMemento, в который передаётся экземпляр класса Memento и значение его свойства State присваивается приватному полю, хранящему состояние.

Программа создаёт стек для хранения экземпляров класса Memento, а также экземляр класса Originator. Затем она вызывает метод ChangeState
экземляра класса Originator для изменения его внутреннего состояния, а после этого вызывает метод CreateMemento для получения внутреннего
состояния экземляра класса Originator внутри экземпляра класса Memento. Далее полученный таким образом экземпляр класса Memento сохраняется
в стеке. Этот набор действий повторяется несколько раз для наполнения стека несколькими экземплярами класса Memento.

Затем всё происходит в обратном порядке: экземпляры класса Memento по очерекди извлекаются их стека, загружаются в Originator с помощью
метода SetMemento, затем внутреннее состояние экземляра класса Originator снова извлекается с помощью метода CreateMemento и значение
свойства State полученного таким образом экземпляра класса Memento выводится в консоль.